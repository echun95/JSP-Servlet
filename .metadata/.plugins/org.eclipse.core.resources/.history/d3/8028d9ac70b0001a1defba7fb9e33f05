<%@page import="java.util.HashMap"%>
<%@page import="java.util.Map"%>
<%@page import="kr.or.ddit.buyer.service.BuyerServiceImpl"%>
<%@page import="kr.or.ddit.buyer.service.IBuyerService"%>
<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%
	String lgu = request.getParameter("lgu");	
	String lgu1 = "";
	String lgu2 = "";
	IBuyerService service = BuyerServiceImpl.getInstance();
	String buyer_lgu = service.selectBuyerId(lgu);
	//P10103
	
	lgu1 = buyer_lgu.substring(0,1);
	lgu2 = buyer_lgu.substring(1,buyer_lgu.length());
	int num = Integer.parseInt(lgu2)+1;
	lgu = lgu1.concat(Integer.toString(num));
	
	Map<String,String> params = new HashMap<String,String>();
	params.put("lgu", lgu);
	
	//웹 애플리케이션 : 테이블 1개당 service, dao, vo가 하나씩 맵핑.
	IBuyerService service = BuyerServiceImpl.getInstance();
	List<BuyerVO> buyerList = service.buyerList(params);

	ObjectMapper jsonDataConvertor = new ObjectMapper();
	String jsonData = jsonDataConvertor.writeValueAsString(buyerList);
	out.print(jsonData);
	
%>